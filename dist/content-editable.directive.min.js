function contentEditable($log,$sce,$window){function _link(scope,elem,attrs,ngModel){return ngModel?(scope.ngModel||ngModel.$setViewValue(elem.html()),ngModel.$render=function(){elem.html(ngModel.$viewValue||elem.html())},elem.bind("click",function(e){e.preventDefault(),elem.attr("contenteditable","true"),elem[0].focus()}),elem.bind("focus",function(e){if(attrs.focusSelect){var range=$window.document.createRange();range.selectNodeContents(elem[0]),$window.getSelection().addRange(range)}}),elem.bind("blur",function(){elem.attr("contenteditable","false");var html=elem.html().replace(/<div>/g,"").replace(/&nbsp;/g," ").replace(/<\/div>/g,"");html!=ngModel.$modelValue&&scope.editCallback&&scope.editCallback(html,elem),ngModel.$setViewValue(html)}),void elem.bind("keydown",function(e){return 27==e.which?(ngModel.$rollbackViewValue(),elem[0].blur()):13==e.which&&attrs.singleLine?elem[0].blur():void 0})):void $log.warn("Error: ngModel is required in elem: ",elem)}var directive={restrict:"A",require:"?ngModel",scope:{editCallback:"=",ngModel:"="},link:_link};return directive}angular.module("app").directive("contentEditable",contentEditable),contentEditable.$inject=["$log","$sce","$window"];